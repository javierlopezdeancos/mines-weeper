{"version":3,"file":"mines-weeper-game.js","sourceRoot":"","sources":["../src/mines-weeper-game.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, html, css, TemplateResult} from 'lit';\nimport {customElement, state} from 'lit/decorators.js';\nimport {MinesWeeper} from './mines-weeper';\n\n@customElement('jla-mines-weeper-game')\nexport class JlaMinesWeeperGame extends LitElement {\n  private minesWeeper: MinesWeeper = new MinesWeeper(4, 3);\n\n  @state()\n  protected on = false;\n\n  @state()\n  protected reload = false;\n\n  @state()\n  protected board: string[][] = [[]];\n\n  constructor() {\n    super();\n  }\n\n  private getCellClass(value: string | boolean): string {\n    let c = 'cell';\n\n    if (value === '1') {\n      c = c + ' cell--one';\n    } else if (value === '2') {\n      c = c + ' cell--two';\n    } else if (value === '3') {\n      c = c + ' cell--three';\n    }\n\n    return c;\n  }\n\n  static override styles = css`\n    :host {\n      --color-primary: #000000;\n      --color-secondary: #ffffff;\n      --color-auxiliary-005: #e0e0e0;\n      --color-auxiliary-006: #cacaca;\n      --color-auxiliary-007: #acacac;\n      --color-auxiliary-008: #8f8f8f;\n      --font-family-primary: 'Poppins', sans-serif;\n      display: block;\n      background: var(--color-secondary);\n      font-family: var(--font-family-primary);\n      font-style: normal;\n      font-weight: 400;\n      font-size: 16px;\n      text-align: center;\n    }\n\n    .board {\n      display: grid;\n      gap: 0;\n      grid-auto-rows: 10em;\n      grid-template-columns: repeat(4, minmax(min(100%, 10em), 1fr));\n      grid-auto-flow: dense;\n    }\n\n    .cell {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      width: 100%;\n      font-size: 5.5em;\n      font-weight: 500;\n      color: var(--color-auxiliary-005);\n    }\n\n    .cell:hover {\n      cursor: pointer;\n    }\n\n    .cell.cell--one {\n      color: var(--color-auxiliary-006);\n    }\n\n    .cell.cell--two {\n      color: var(--color-auxiliary-007);\n    }\n\n    .cell.cell--three {\n      color: var(--color-auxiliary-008);\n    }\n\n    button {\n      --button-width: 7em;\n      --button-width-long: 8em;\n      border: none;\n      box-shadow: none;\n      background: var(--color-primary);\n      border-radius: 40px;\n      margin-top: 1em;\n      font-size: 1.3em;\n      font-weight: 700;\n      width: var(--button-width);\n      height: 2em;\n      color: var(--color-secondary);\n      cursor: pointer;\n    }\n\n    @keyframes width-button-hover {\n      from {\n        width: var(--button-width);\n      }\n      25% {\n        width: var(--button-width-long);\n      }\n      50% {\n        width: calc(var(--button-width) - 5px);\n      }\n      75% {\n        width: var(--button-width-long);\n      }\n      to {\n        width: var(--button-width);\n      }\n    }\n\n    button:hover {\n      width: var(--button-width);\n      animation-duration: 0.5s;\n      animation-name: width-button-hover;\n    }\n\n    @media screen and (max-width: 1000px) {\n      :host {\n        font-size: 35px;\n      }\n    }\n  `;\n\n  override render(): TemplateResult {\n    return html`\n      ${!this.on\n        ? html` ${!this.reload\n            ? html`\n                <h2>Welcome to the mines weeper web game!!</h2>\n                <button @click=\"${this.start}\">START</button>\n              `\n            : html`\n                <h2>Do yo want to start again?</h2>\n                <button @click=\"${this.restart}\">RESTART</button>\n              `}`\n        : html` <div class=\"board\">\n            ${this.board.map(\n              (row, r) => html`\n                ${row.map(\n                  (cell, c) =>\n                    html` <div\n                      class=\"${this.getCellClass(cell)}\"\n                      data-row=\"${r}\"\n                      data-column=\"${c}\"\n                      @click=\"${this.discover}\"\n                    >\n                      ${cell}\n                    </div>`\n                )}\n              `\n            )}\n          </div>`}\n    `;\n  }\n\n  private updateStatus(): void {\n    this.on = this.minesWeeper.on;\n  }\n\n  private updateBoard(): void {\n    this.board = [...this.minesWeeper.matrix];\n  }\n\n  private finish(): void {\n    this.minesWeeper.resolve();\n    this.updateBoard();\n  }\n\n  private discover(e: MouseEvent): void {\n    this.updateStatus();\n\n    if (!this.on) {\n      this.reload = true;\n      return;\n    }\n\n    const dataRow = (e.target as Element)?.getAttribute('data-row');\n    const dataColumn = (e.target as Element).getAttribute('data-column');\n\n    if (dataRow && dataColumn) {\n      const row = parseInt(dataRow, 10);\n      const column = parseInt(dataColumn, 10);\n      const [hasMine] = this.minesWeeper.pick(row, column);\n\n      if (hasMine) {\n        this.finish();\n      }\n\n      this.updateBoard();\n    }\n  }\n\n  private start(): void {\n    console.log('START');\n    this.minesWeeper.initialize();\n    this.updateStatus();\n    this.updateBoard();\n    console.log('ON', this.on);\n  }\n\n  private restart(): void {\n    this.reload = false;\n    this.start();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'jla-mines-weeper-game': JlaMinesWeeperGame;\n  }\n}\n"]}